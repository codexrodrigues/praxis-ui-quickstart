@use '@angular/material' as mat;

// Tema Material 3 escuro com tokens
$primary-palette: mat.$cyan-palette;
$secondary-palette: mat.$violet-palette;
$tertiary-palette: mat.$rose-palette;

$dark-theme: mat.define-theme((
  color: (
    theme-type: dark,
    primary: $primary-palette,
    tertiary: $tertiary-palette,
  ),
  typography: (
    brand-family: 'Lexend, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif',
    bold-weight: 700,
  ),
  density: (
    scale: 0
  )
));

// Aplica tokens globais do tema dark
:root {
  @include mat.core-theme($dark-theme);
  @include mat.all-component-themes($dark-theme);
  /* Typographic color tokens for dark UI */
  --text-strong: #ebeff5;
  --text-body: #e6ebf2;
  --text-muted: rgba(255,255,255,0.72);
  --text-subtle: rgba(255,255,255,0.55);
  --accent: #60a5fa;
  --accent-2: #8b5cf6;
  --highlight: rgba(96,165,250,0.10);
  /* Brand gradient */
  --brand-grad-start: #60a5fa; /* cyan-400 */
  --brand-grad-end: #8b5cf6;   /* violet-400 */
  /* HTTP badges palette (customizable) */
  --http-get-start: #34d399;   /* emerald-400 */
  --http-get-end: #10b981;     /* emerald-500 */
  --http-post-start: var(--brand-grad-start);
  --http-post-end: var(--brand-grad-end);
  --http-put-start: #f59e0b;   /* amber-500 */
  --http-put-end: #d97706;     /* amber-600 */
  --http-patch-start: #a78bfa; /* violet-300 */
  --http-patch-end: #8b5cf6;   /* violet-400 */
  --http-delete-start: #ef4444;/* red-500 */
  --http-delete-end: #dc2626;  /* red-600 */
  /* Alias: map workspace tokens (--md-sys-*) to Angular Material tokens (--mat-sys-*) */
  /* Core surfaces + text (with safe fallbacks to avoid transparency) */
  --md-sys-color-surface: var(--mat-sys-color-surface, #121212);
  --md-sys-color-surface-variant: var(--mat-sys-color-surface-variant, #2a2f36);
  --md-sys-color-surface-container-lowest: var(--mat-sys-color-surface-container-lowest, #0b0f14);
  --md-sys-color-surface-container-low: var(--mat-sys-color-surface-container-low, #151a20);
  --md-sys-color-surface-container: var(--mat-sys-color-surface-container, #1c1f24);
  --md-sys-color-surface-container-high: var(--mat-sys-color-surface-container-high, #22262c);
  --md-sys-color-surface-container-highest: var(--mat-sys-color-surface-container-highest, #262b31);
  --md-sys-color-on-surface: var(--mat-sys-color-on-surface, #e6ebf2);
  --md-sys-color-on-surface-variant: var(--mat-sys-color-on-surface-variant, #b7bcc6);
  --md-sys-color-outline-variant: var(--mat-sys-color-outline-variant, rgba(255,255,255,0.14));
  --md-sys-color-outline: var(--mat-sys-color-outline, rgba(255,255,255,0.24));

  /* Brand and states */
  --md-sys-color-primary: var(--mat-sys-color-primary, #4cc9f0);
  --md-sys-color-on-primary: var(--mat-sys-color-on-primary, #ffffff);
  --md-sys-color-primary-container: var(--mat-sys-color-primary-container, #0e7aa3);
  --md-sys-color-on-primary-container: var(--mat-sys-color-on-primary-container, #d0f0ff);
  --md-sys-color-secondary: var(--mat-sys-color-secondary, #b39ddb);
  --md-sys-color-on-secondary: var(--mat-sys-color-on-secondary, #1b1327);
  --md-sys-color-secondary-container: var(--mat-sys-color-secondary-container, #3a2c5e);
  --md-sys-color-on-secondary-container: var(--mat-sys-color-on-secondary-container, #e8dcff);
  --md-sys-color-tertiary: var(--mat-sys-color-tertiary, #ff8fab);
  --md-sys-color-tertiary-container: var(--mat-sys-color-tertiary-container, #5a2231);
  --md-sys-color-on-tertiary-container: var(--mat-sys-color-on-tertiary-container, #ffd9e1);
  --md-sys-color-error: var(--mat-sys-color-error, #ffb4ab);
  --md-sys-color-error-container: var(--mat-sys-color-error-container, #8c1d18);
  --md-sys-color-on-error-container: var(--mat-sys-color-on-error-container, #ffdad6);
  --md-sys-color-background: var(--mat-sys-color-background, var(--mat-sys-color-surface, #121212));
}
html, body { height: 100%; }

// Global default font for non‑Material text
body {
  font-family: 'Lexend', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  font-size: 15.5px;
  line-height: 1.55;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  color: var(--text-body);
}

// Gradiente e base do app
.app-dark {
  --app-bg: radial-gradient(1200px 800px at 10% -10%, rgba(0, 180, 200, 0.25), transparent 60%),
             radial-gradient(1000px 700px at 110% 10%, rgba(120, 80, 200, 0.25), transparent 60%),
             linear-gradient(180deg, #0b1118 0%, #0a0f15 100%);
  background: var(--app-bg) fixed;
  color: var(--mat-sys-color-on-surface, #e6e6e6);
}

/* Ensure overlays inherit the same variables even when rendered outside app root */
.cdk-overlay-container, .cdk-global-overlay-wrapper {
  /* Core surfaces + text */
  --md-sys-color-surface: var(--mat-sys-color-surface, #121212);
  --md-sys-color-surface-variant: var(--mat-sys-color-surface-variant, #2a2f36);
  --md-sys-color-surface-container-lowest: var(--mat-sys-color-surface-container-lowest, #0b0f14);
  --md-sys-color-surface-container-low: var(--mat-sys-color-surface-container-low, #151a20);
  --md-sys-color-surface-container: var(--mat-sys-color-surface-container, #1c1f24);
  --md-sys-color-surface-container-high: var(--mat-sys-color-surface-container-high, #22262c);
  --md-sys-color-surface-container-highest: var(--mat-sys-color-surface-container-highest, #262b31);
  --md-sys-color-on-surface: var(--mat-sys-color-on-surface, #e6ebf2);
  --md-sys-color-on-surface-variant: var(--mat-sys-color-on-surface-variant, #b7bcc6);
  --md-sys-color-outline-variant: var(--mat-sys-color-outline-variant, rgba(255,255,255,0.14));
  --md-sys-color-outline: var(--mat-sys-color-outline, rgba(255,255,255,0.24));

  /* Brand and states */
  --md-sys-color-primary: var(--mat-sys-color-primary, #4cc9f0);
  --md-sys-color-on-primary: var(--mat-sys-color-on-primary, #ffffff);
  --md-sys-color-primary-container: var(--mat-sys-color-primary-container, #0e7aa3);
  --md-sys-color-on-primary-container: var(--mat-sys-color-on-primary-container, #d0f0ff);
  --md-sys-color-secondary: var(--mat-sys-color-secondary, #b39ddb);
  --md-sys-color-on-secondary: var(--mat-sys-color-on-secondary, #1b1327);
  --md-sys-color-secondary-container: var(--mat-sys-color-secondary-container, #3a2c5e);
  --md-sys-color-on-secondary-container: var(--mat-sys-color-on-secondary-container, #e8dcff);
  --md-sys-color-tertiary: var(--mat-sys-color-tertiary, #ff8fab);
  --md-sys-color-tertiary-container: var(--mat-sys-color-tertiary-container, #5a2231);
  --md-sys-color-on-tertiary-container: var(--mat-sys-color-on-tertiary-container, #ffd9e1);
  --md-sys-color-error: var(--mat-sys-color-error, #ffb4ab);
  --md-sys-color-error-container: var(--mat-sys-color-error-container, #8c1d18);
  --md-sys-color-on-error-container: var(--mat-sys-color-on-error-container, #ffdad6);
  --md-sys-color-background: var(--mat-sys-color-background, var(--mat-sys-color-surface, #121212));
}

// Estilo glassmorphism para painéis
.glass-panel {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  backdrop-filter: blur(8px) saturate(120%);
  -webkit-backdrop-filter: blur(8px) saturate(120%);
  border-radius: 12px;
}

// Ajustes típicos
* { box-sizing: border-box; }
body, h1, h2, h3, h4, h5, h6, p { margin: 0; }

// Material Symbols Outlined (outlined icons with thin weight)
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 100, 'GRAD' -25, 'opsz' 24;
}

/* Gradient borders util (uses masking to preserve rounded corners) */
.gradient-border {
  position: relative;
  border: 1px solid transparent; /* inner separation */
}
.gradient-border::before {
  content: '';
  position: absolute;
  inset: 0; /* full box */
  padding: 1px; /* border thickness */
  border-radius: inherit;
  background: linear-gradient(135deg, var(--brand-grad-start), var(--brand-grad-end));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Ensure Material dialog surfaces use M3 surface tokens (avoid transparency) */
.mat-mdc-dialog-container .mdc-dialog__surface {
  background: var(--md-sys-color-surface-container);
  color: var(--md-sys-color-on-surface);
}
.mat-mdc-dialog-container .mdc-dialog__content {
  background: var(--md-sys-color-surface);
  color: var(--md-sys-color-on-surface);
}

/* Typographic harmony (content area including Praxis Table page) */
.content-card__body {
  /* Base text */
  p { margin: 8px 0 12px; color: var(--text-body); }
  .muted, small { color: var(--text-muted); }
  .subtle { color: var(--text-subtle); }
  .lead { font-size: 16.5px; line-height: 1.6; color: var(--text-body); }
  a { color: #89b8ff; text-decoration: none; }
  a:hover { text-decoration: underline; }

  /* Headings scale */
  h1, h2, h3, h4, h5, h6 { color: var(--text-strong); font-weight: 700; margin: 10px 0 6px; letter-spacing: .1px; }
  h1 { font-size: 22px; line-height: 1.3; }
  h2 { font-size: 19px; line-height: 1.35; }
  h3 { font-size: 17px; line-height: 1.4; }
  h4 { font-size: 15.5px; line-height: 1.45; }
  h5 { font-size: 14.5px; line-height: 1.45; }
  h6 { font-size: 13.5px; line-height: 1.45; }

  /* Emphasis */
  mark, .highlight { background: var(--highlight); color: var(--text-strong); padding: 0 2px; border-radius: 2px; }
  strong { font-weight: 700; color: var(--text-strong); }

  /* Lists */
  ul, ol { margin: 6px 0 10px 18px; }
  li { margin: 4px 0; }

  /* Tables (PraxisTable + Material) */
  praxis-table, .mat-mdc-table { font-size: 14.5px; line-height: 1.45; font-variant-numeric: tabular-nums; }
  /* Row density and spacing */
  .mat-mdc-header-row, .mat-mdc-row { height: 40px; }
  .mat-mdc-header-cell, .mat-mdc-cell { padding: 8px 12px; }
  .mat-mdc-header-cell { font-weight: 600; color: var(--text-strong); letter-spacing: .2px; }
  .mat-mdc-cell { color: var(--text-body); }
  .mat-mdc-paginator { font-size: 13px; color: var(--text-muted); }

  /* Praxis table toolbar */
  praxis-table-toolbar { display: block; padding: 6px 8px; border-bottom: 1px solid rgba(255,255,255,.14); background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04)); border-top-left-radius: 6px; border-top-right-radius: 6px; }
  praxis-table-toolbar [end-actions],
  praxis-table-toolbar [toolbar],
  praxis-table-toolbar [advancedFilter] { display: inline-flex; align-items: center; gap: 6px; }

  /* Code blocks styling in main area */
  .code-demo pre { background: rgba(10,14,20,0.75); padding: 10px; border-radius: 6px; overflow: auto; border: 1px solid rgba(255,255,255,0.12); }
  .code-demo code { color: #eaeaf1; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 12.5px; }
}

/* Material: gradient primary buttons (flat/raised/FAB) */
.mat-mdc-unelevated-button.mat-primary,
.mat-mdc-raised-button.mat-primary,
.mat-mdc-fab.mat-primary,
.mat-mdc-mini-fab.mat-primary {
  background-image: linear-gradient(90deg, var(--brand-grad-start), var(--brand-grad-end));
  color: #fff;
  border: 1px solid rgba(255,255,255,0.18);
}
.mat-mdc-unelevated-button.mat-primary:hover,
.mat-mdc-raised-button.mat-primary:hover,
.mat-mdc-fab.mat-primary:hover,
.mat-mdc-mini-fab.mat-primary:hover {
  filter: brightness(1.06);
}
.mat-mdc-unelevated-button.mat-primary:active,
.mat-mdc-raised-button.mat-primary:active,
.mat-mdc-fab.mat-primary:active,
.mat-mdc-mini-fab.mat-primary:active {
  filter: brightness(0.95);
}
.mat-mdc-unelevated-button.mat-primary.mat-mdc-button-disabled,
.mat-mdc-raised-button.mat-primary.mat-mdc-button-disabled,
.mat-mdc-fab.mat-primary.mat-mdc-button-disabled,
.mat-mdc-mini-fab.mat-primary.mat-mdc-button-disabled {
  background-image: none;
}

/* Material: outlined primary with gradient outline */
.mat-mdc-outlined-button.mat-primary {
  border-color: transparent !important;
  position: relative;
}
.mat-mdc-outlined-button.mat-primary::before {
  content: '';
  position: absolute; inset: 0;
  padding: 1px; border-radius: inherit;
  background: linear-gradient(90deg, var(--brand-grad-start), var(--brand-grad-end));
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  pointer-events: none;
}
